<html>
<body>

<div id="divUi">

	<h3>Civilization-Building Game</h3>

	<p>
		Enter valid commands to play the game.  Enter "help" for a list of commands.
	</p>

	<div>
		<label>Display:</label>
		<br />
		<div id="divDisplay" style="border:1px solid"></div>
	</div>

	<div>
		<label>Output:</label>
		<br />
		<div id="textareaOutputLog" style="font:10px Courier New" readonly="readonly"></div>
	</div>

	<div>
		<label>Command:</label>
		<br />
		<input id="inputCommand" readonly="readonly"></input>
	</div>

</div>

<script type="text/javascript" src="Base.js"></script>
<script type="text/javascript" src="Command.js"></script>
<script type="text/javascript" src="Coords.js"></script>
<script type="text/javascript" src="Direction.js"></script>
<script type="text/javascript" src="Display.js"></script>
<script type="text/javascript" src="InputHelper.js"></script>
<script type="text/javascript" src="MapOfCells.js"></script>
<script type="text/javascript" src="Owner.js"></script>
<script type="text/javascript" src="Technology.js"></script>
<script type="text/javascript" src="Unit.js"></script>
<script type="text/javascript" src="World.js"></script>

<script type="text/javascript">

class Game
{
	run()
	{
		var display = new DisplayCanvas
		(
			"divDisplay", new Coords(1024, 512)
		);
		var world = World.demo();
		var universe = new Universe(display, world);
		universe.initialize();
	}
}

// Classes.

class Color
{
	constructor(name, systemColor)
	{
		this.name = name;
		this.systemColor = systemColor;
	}
}

class IdHelper
{
	static _idNext = 0;

	static idNext()
	{
		var id = this._idNext;
		this._idNext++;
		return id;
	}
}

class ResourceProduction
{
	constructor(food, industry, trade)
	{
		this.food = food;
		this.industry = industry;
		this.trade = trade;
	}

	static create()
	{
		return new ResourceProduction(0, 0, 0);
	}

	add(other)
	{
		this.food += other.food;
		this.industry += other.industry;
		this.trade += other.trade;
	}
}

class SelectableCategory
{
	constructor(index, name)
	{
		this.index = index;
		this.name = name;
	}

	static Instances()
	{
		if (SelectableCategory._instances == null)
		{
			SelectableCategory._instances = new SelectableCategory_Instances();
		}
		return SelectableCategory._instances;
	}

	static byName(name)
	{
		return SelectableCategory.Instances().byName(name);
	}
}

class SelectableCategory_Instances
{
	constructor()
	{
		this.Bases = new SelectableCategory(0, "Bases");
		this.Units = new SelectableCategory(1, "Units");

		this._All =
		[
			this.Bases,
			this.Units
		];

		this._AllByName = new Map(this._All.map(x => [x.name, x] ) )
	}
}

class Universe
{
	constructor(display, world)
	{
		this.display = display;
		this.world = world;

		this.inputHelper = new InputHelper();
		this.outputLog = new DisplayText("textareaOutputLog");
	}

	initialize()
	{
		this.inputHelper.initialize(this);
		this.display.initialize(this);
		this.world.initialize(this);
	}
}


// Run.

new Game().run();

</script>

</body>
</html>
